(this["webpackJsonpcompanies-incomes-table"]=this["webpackJsonpcompanies-incomes-table"]||[]).push([[0],[,,,,,,,,function(e,t,a){e.exports={wraper:"Pagination_wraper__3jSyy",disabled:"Pagination_disabled__1i9Fy"}},function(e,t,a){e.exports={thead:"TableHead_thead__3oUck",touched:"TableHead_touched__3yP6V"}},function(e,t,a){e.exports=a.p+"static/media/sort-down.ca82bc74.svg"},function(e,t,a){e.exports={tbody:"TableBody_tbody__1iThr",fillers:"TableBody_fillers__37e_r"}},,,,function(e,t,a){e.exports={input:"SearchBar_input__vrkGr"}},function(e,t,a){e.exports={wraper:"HeadingBar_wraper__3lKhB"}},function(e,t,a){e.exports={wraper:"Table_wraper__19BIv"}},function(e,t,a){e.exports=a.p+"static/media/sort-up.3a5f2344.svg"},function(e,t,a){e.exports={wraper:"ErrorModal_wraper__16zXA"}},function(e,t,a){e.exports=a.p+"static/media/left-arrow.6c9efe0c.svg"},function(e,t,a){e.exports=a.p+"static/media/right-arrow.be237328.svg"},function(e,t,a){e.exports={select:"Select_select__1GDve"}},function(e,t,a){e.exports={wraper:"LoadingModal_wraper__3D1jc"}},,,function(e,t,a){e.exports=a(54)},,,,,,function(e,t,a){},,,,,,,,,,,,,,,,,,,,,,function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(13),l=a.n(c),o=a(7),s=a.n(o),i=a(25),u=a(3),m=a(14),d=a(6),p=a(2),f=(a(32),a(15)),h=a.n(f),g=function(e){var t=e.searchedItem,a=e.setSearchedItem;return r.a.createElement("div",null,r.a.createElement("input",{className:h.a.input,type:"text",placeholder:"Search...",value:t,onChange:function(e){a(e.target.value)}}))},v=a(16),b=a.n(v),E=function(e){var t=e.searchedItem,a=e.setSearchedItem;return r.a.createElement("section",{className:b.a.wraper},r.a.createElement("h1",null,"Companies incomes"),r.a.createElement(g,{searchedItem:t,setSearchedItem:a}))},P=a(17),y=a.n(P),_=a(9),w=a.n(_),j=[{name:"Id",columnKey:"id"},{name:"Name",columnKey:"name"},{name:"City",columnKey:"city"},{name:"Total income",columnKey:"totalIncome"},{name:"Avg Income",columnKey:"avgIncome"},{name:"Last month income",columnKey:"lastMonthIncome"}],I=a(10),O=a.n(I),x=a(18),C=a.n(x),S=function(e){var t=e.allCompanies,a=e.setter,c=e.setCurrentPage,l=Object(n.useState)(null),o=Object(p.a)(l,2),s=o[0],i=o[1],u=Object(n.useState)(!0),m=Object(p.a)(u,2),f=m[0],h=m[1];return r.a.createElement("thead",{className:w.a.thead},r.a.createElement("tr",null,j.map((function(e,n){return r.a.createElement("td",{key:n,onClick:function(){return n=e.columnKey,s===n?(h(!f),a(Object(d.a)(t.reverse()))):(h(!0),a(Object(d.a)(t.sort((function(e,t){return e[n]>t[n]?1:t[n]>e[n]?-1:0}))))),c(1),void i(n);var n}},r.a.createElement("div",null,r.a.createElement("img",{className:s===e.columnKey?w.a.touched:null,src:s===e.columnKey?f?O.a:C.a:O.a,alt:"sort-icon"}),r.a.createElement("span",null,e.name)))}))))},k=a(11),N=a.n(k),K=function(e){return e?new Intl.NumberFormat("en-US",{minimumFractionDigits:2}).format(e):null},A=function(e){var t=e.companiesPerPage,a=e.searchedItem,n=e.itemsPerPage;e.error;return r.a.createElement("tbody",{className:N.a.tbody},t&&t.filter((function(e){var t,n=!1,r=Object(u.a)(j);try{for(r.s();!(t=r.n()).done;){if(e[t.value.columnKey].toString().toLowerCase().includes(a.toLowerCase())){n=!0;break}}}catch(c){r.e(c)}finally{r.f()}return n})).map((function(e,t){return r.a.createElement("tr",{key:e.id},r.a.createElement("td",null,e.id),r.a.createElement("td",null,e.name),r.a.createElement("td",null,e.city),r.a.createElement("td",null,K(e.totalIncome)),r.a.createElement("td",null,K(e.avgIncome)),r.a.createElement("td",null,K(e.lastMonthIncome)))})),n>t.length&&new Array(n-t.length).fill(1).map((function(e,t){return r.a.createElement("tr",{className:N.a.fillers,key:-t})})))},F=a(19),B=a.n(F),M=function(e){return e.condition?r.a.createElement("div",{className:B.a.wraper},r.a.createElement("p",null,"Sorry, an error occurred. Please try again later.")):null},T=function(e){var t=e.allCompanies,a=e.companiesPerPage,n=e.setAllCompanies,c=e.searchedItem,l=e.itemsPerPage,o=e.setCurrentPage,s=e.error;return r.a.createElement("div",{className:y.a.wraper},r.a.createElement("table",null,r.a.createElement(S,{allCompanies:t,setter:n,setCurrentPage:o}),r.a.createElement(A,{companiesPerPage:a,searchedItem:c,itemsPerPage:l,error:s})),r.a.createElement(M,{condition:s}))},L=a(8),D=a.n(L),H=a(20),G=a.n(H),J=a(21),U=a.n(J),z=a(22),V=a.n(z),X=[{value:10,label:"10"},{value:25,label:"25"},{value:50,label:"50"},{value:100,label:"100"}],Y=function(e){var t=e.setItemsPerPage,a=e.setCurrentPage;return r.a.createElement("select",{className:V.a.select,onChange:function(e){a(1),t(e.target.value)}},X.map((function(e,t){return r.a.createElement("option",{key:t,value:e.value},e.label)})))},q=function(e){var t=e.itemsPerPage,a=e.setItemsPerPage,n=e.currentPage,c=e.setCurrentPage,l=e.recordsAmount,o=Math.ceil(l/t),s=function(e){"right-arrow"===e.target.alt?c(n+1):c(n-1)};return r.a.createElement("section",{className:D.a.wraper},r.a.createElement("div",null,r.a.createElement("p",null,"Items per page:"),r.a.createElement(Y,{setItemsPerPage:a,setCurrentPage:c})),r.a.createElement("div",null,r.a.createElement("p",null,"Page: ",n," of ",o),r.a.createElement("img",{src:G.a,alt:"left-arrow",onClick:n<2?null:s,className:n<2?D.a.disabled:null}),r.a.createElement("img",{src:U.a,alt:"right-arrow",onClick:n===o?null:s,className:n===o?D.a.disabled:null})))},Q=a(23),R=a.n(Q),W=a(24),Z=a.n(W),$=function(e){var t=e.condition,a=e.text;return t?r.a.createElement("div",{className:R.a.wraper},r.a.createElement(Z.a,{type:"Oval",color:"#005CA9",height:50,width:50}),r.a.createElement("p",null,a)):null},ee=function(e){var t,a=e.incomes.sort((function(e,t){return e.date>t.date?-1:t.date>e.date?1:0})),n=+a.reduce((function(e,t,a){return 1===a?+e.value+ +t.value:e+ +t.value})).toFixed(2),r=+(n/a.length).toFixed(2),c=[],l=a[0].date.slice(0,7),o=Object(u.a)(a);try{for(o.s();!(t=o.n()).done;){var s=t.value;if(s.date.slice(0,7)<l)break;c.push(s)}}catch(i){o.e(i)}finally{o.f()}return[n,r,+c.map((function(e){return+e.value})).reduce((function(e,t){return e+t})).toFixed(2)]},te=function(e,t,a){if(t.length%(e.length/100).toFixed()===0)return a((t.length/e.length*100).toFixed())};var ae=function(){var e=Object(n.useState)([]),t=Object(p.a)(e,2),a=t[0],c=t[1],l=Object(n.useState)(""),o=Object(p.a)(l,2),f=o[0],h=o[1],g=Object(n.useState)(10),v=Object(p.a)(g,2),b=v[0],P=v[1],y=Object(n.useState)(1),_=Object(p.a)(y,2),w=_[0],j=_[1],I=Object(n.useState)(!1),O=Object(p.a)(I,2),x=O[0],C=O[1],S=Object(n.useState)(!1),k=Object(p.a)(S,2),N=k[0],K=k[1],A=Object(n.useState)(0),F=Object(p.a)(A,2),B=F[0],M=F[1];Object(n.useEffect)((function(){var e=[],t=[],a=function(){var a=Object(m.a)(s.a.mark((function a(){var n,r,l;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:K(!0),n=Object(u.a)(e),a.prev=2,l=s.a.mark((function a(){var n;return s.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return n=r.value,a.next=3,fetch("https://recruitment.hal.skygate.io/incomes/".concat(n.id)).then((function(e){return e.json()})).then((function(a){var r=ee(a),c=Object(p.a)(r,3),l=c[0],o=c[1],s=c[2];t.push(Object(i.a)({},n,{totalIncome:l,avgIncome:o,lastMonthIncome:s})),te(e,t,M)})).catch((function(){C(!0),K(!1)}));case 3:t.length===b&&c(t);case 4:case"end":return a.stop()}}),a)})),n.s();case 5:if((r=n.n()).done){a.next=9;break}return a.delegateYield(l(),"t0",7);case 7:a.next=5;break;case 9:a.next=14;break;case 11:a.prev=11,a.t1=a.catch(2),n.e(a.t1);case 14:return a.prev=14,n.f(),a.finish(14);case 17:c(t),K(!1);case 19:case"end":return a.stop()}}),a,null,[[2,11,14,17]])})));return function(){return a.apply(this,arguments)}}();K(!0),fetch("https://recruitment.hal.skygate.io/companies").then((function(e){return e.json()})).then((function(t){e.push.apply(e,Object(d.a)(t.sort((function(e,t){return e.id-t.id})))),c(e.slice(0,b)),a()})).catch((function(){C(!0),K(!1)}))}),[]);var L=b*w,D=L-b,H=a.slice(D,L);return r.a.createElement("div",{className:"App"},r.a.createElement("div",{className:"wraper"},r.a.createElement(E,{searchedItem:f,setSearchedItem:h}),r.a.createElement(T,{allCompanies:a,companiesPerPage:H,setAllCompanies:c,searchedItem:f,itemsPerPage:b,setCurrentPage:j,error:x}),r.a.createElement(q,{itemsPerPage:b,setItemsPerPage:P,currentPage:w,setCurrentPage:j,recordsAmount:a.length}),r.a.createElement($,{condition:N,text:"Loading data... ".concat(B,"%")})))};l.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(ae,null)),document.getElementById("root"))}],[[26,1,2]]]);
//# sourceMappingURL=main.6f6fc9f4.chunk.js.map